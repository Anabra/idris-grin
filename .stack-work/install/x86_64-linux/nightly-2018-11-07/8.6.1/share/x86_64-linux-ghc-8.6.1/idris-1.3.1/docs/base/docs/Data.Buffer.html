<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>IdrisDoc: Data.Buffer</title><link type="text/css" rel="stylesheet" href="../styles.css"></head><body class="namespace"><div class="wrapper"><header><strong>IdrisDoc</strong>: Data.Buffer<nav><a href="../index.html">Index</a></nav></header><div class="container"><h1>Data.Buffer</h1><dl class="decls"><dt id="Data.Buffer.Buffer"><span class="word">record&nbsp;</span><span class="name type" title="Data.Buffer.Buffer">Buffer</span><span class="type">&nbsp;</span></dt><dd><p>A buffer is a pointer to a sized, unstructured, mutable chunk of memory.<br />
There are primitive operations for getting and setting bytes, ints (32 bit)<br />
and strings at a location in the buffer. These operations silently fail<br />
if the location is out of bounds, so bounds checking should be done in<br />
advance.</p>
<dl class="decls"><dt id="Data.Buffer.MkBuffer"><span class="name constructor" title="Data.Buffer.MkBuffer">MkBuffer</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="documented boundvar" title="Raw bytes, as a pointer to a block of memory">rawdata</span> : <a class="type" title="ManagedPtr" href="[builtins].html#ManagedPtr">ManagedPtr</a>) ->
(<span class="documented boundvar" title="Cached size of block">buf_size</span> : <span class="type" title="Int">Int</span>) ->
(<span class="documented boundvar" title="Next location to read/write (e.g. when reading from file)">location</span> : <span class="type" title="Int">Int</span>) ->
<a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a></span></dt><dd><dl><dt>rawdata</dt><dd><p>Raw bytes, as a pointer to a block of memory</p>
</dd><dt>buf_size</dt><dd><p>Cached size of block</p>
</dd><dt>location</dt><dd><p>Next location to read/write (e.g. when reading from file)</p>
</dd></dl></dd></dl><dl class="decls"><dt id="Data.Buffer.Buffer.rawdata"><span class="name function" title="Data.Buffer.Buffer.rawdata">rawdata</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">rec</span> : <a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a>) ->
<a class="type" title="ManagedPtr" href="[builtins].html#ManagedPtr">ManagedPtr</a></span></dt><dd><p>Raw bytes, as a pointer to a block of memory</p>
</dd><dt id="Data.Buffer.Buffer.buf_size"><span class="name function" title="Data.Buffer.Buffer.buf_size">buf_size</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">rec</span> : <a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a>) ->
<span class="type" title="Int">Int</span></span></dt><dd><p>Cached size of block</p>
</dd><dt id="Data.Buffer.Buffer.location"><span class="name function" title="Data.Buffer.Buffer.location">location</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">rec</span> : <a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a>) ->
<span class="type" title="Int">Int</span></span></dt><dd><p>Next location to read/write (e.g. when reading from file)</p>
</dd></dl></dd><dt id="Data.Buffer.MkBuffer"><span class="name constructor" title="Data.Buffer.MkBuffer">MkBuffer</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="documented boundvar" title="Raw bytes, as a pointer to a block of memory">rawdata</span> : <a class="type" title="ManagedPtr" href="[builtins].html#ManagedPtr">ManagedPtr</a>) ->
(<span class="documented boundvar" title="Cached size of block">buf_size</span> : <span class="type" title="Int">Int</span>) ->
(<span class="documented boundvar" title="Next location to read/write (e.g. when reading from file)">location</span> : <span class="type" title="Int">Int</span>) ->
<a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a></span></dt><dd><dl><dt>rawdata</dt><dd><p>Raw bytes, as a pointer to a block of memory</p>
</dd><dt>buf_size</dt><dd><p>Cached size of block</p>
</dd><dt>location</dt><dd><p>Next location to read/write (e.g. when reading from file)</p>
</dd></dl></dd><dt id="Data.Buffer.bufferData"><span class="name function" title="Data.Buffer.bufferData">bufferData</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> (<a class="type" title="Prelude.List.List" href="Prelude.List.html#Prelude.List.List">List</a> <span class="type" title="Bits8">Bits8</span>)</span></dt><dd><p>Return the contents of the buffer as a list</p>
</dd><dt id="Data.Buffer.copyData"><span class="name function" title="Data.Buffer.copyData">copyData</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">src</span> : <a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a>) ->
(<span class="boundvar" title="">start</span> : <span class="type" title="Int">Int</span>) ->
(<span class="boundvar" title="">len</span> : <span class="type" title="Int">Int</span>) ->
(<span class="boundvar" title="">dest</span> : <a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a>) ->
(<span class="boundvar" title="">loc</span> : <span class="type" title="Int">Int</span>) ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a></span></dt><dd><p>Copy data from &#39;src&#39; to &#39;dest&#39;. Reads &#39;len&#39; bytes starting at position<br />
&#39;start&#39; in &#39;src&#39;, and writes them starting at position &#39;loc&#39; in &#39;dest&#39;.<br />
Does nothing if a location is out of bounds, or there is not enough room</p>
</dd><dt id="Data.Buffer.getByte"><span class="name function" title="Data.Buffer.getByte">getByte</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
(<span class="boundvar" title="">loc</span> : <span class="type" title="Int">Int</span>) ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> <span class="type" title="Bits8">Bits8</span></span></dt><dd><p>Return the value at the given location in the buffer.<br />
Returns 0 if out of bounds.</p>
</dd><dt id="Data.Buffer.getDouble"><span class="name function" title="Data.Buffer.getDouble">getDouble</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
(<span class="boundvar" title="">loc</span> : <span class="type" title="Int">Int</span>) ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> <span class="type" title="Double">Double</span></span></dt><dd><p>Return the value at the given location in the buffer, assuming 8<br />
bytes to store the Double.<br />
Returns 0 if out of bounds.</p>
</dd><dt id="Data.Buffer.getInt"><span class="name function" title="Data.Buffer.getInt">getInt</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
(<span class="boundvar" title="">loc</span> : <span class="type" title="Int">Int</span>) ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> <span class="type" title="Int">Int</span></span></dt><dd><p>Return the value at the given location in the buffer, assuming 4<br />
bytes to store the Int.<br />
Returns 0 if out of bounds.</p>
</dd><dt id="Data.Buffer.getString"><span class="name function" title="Data.Buffer.getString">getString</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
(<span class="boundvar" title="">loc</span> : <span class="type" title="Int">Int</span>) ->
(<span class="boundvar" title="">len</span> : <span class="type" title="Int">Int</span>) ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> <span class="type" title="String">String</span></span></dt><dd><p>Return the string at the given location in the buffer, with the given<br />
length. Returns &quot;&quot; if out of bounds.</p>
</dd><dt id="Data.Buffer.newBuffer"><span class="name function" title="Data.Buffer.newBuffer">newBuffer</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">size</span> : <span class="type" title="Int">Int</span>) ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> (<a class="type" title="Prelude.Maybe.Maybe" href="Prelude.Maybe.html#Prelude.Maybe.Maybe">Maybe</a> <a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a>)</span></dt><dd><p>Create a new buffer &#39;size&#39; bytes long. Returns &#39;Nothing&#39; if allocation<br />
fails</p>
</dd><dt id="Data.Buffer.rawSize"><span class="name function" title="Data.Buffer.rawSize">rawSize</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> <span class="type" title="Int">Int</span></span></dt><dd><p>Return the space available in the buffer</p>
</dd><dt id="Data.Buffer.readBufferFromFile"><span class="name function" title="Data.Buffer.readBufferFromFile">readBufferFromFile</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Prelude.File.File" href="Prelude.File.html#Prelude.File.File">File</a> ->
<a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
(<span class="boundvar" title="">maxbytes</span> : <span class="type" title="Int">Int</span>) ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> <a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a></span></dt><dd><p>Read &#39;maxbytes&#39; into the buffer from a file, returning a new<br />
buffer with the &#39;locaton&#39; pointer moved along</p>
</dd><dt id="Data.Buffer.resetBuffer"><span class="name function" title="Data.Buffer.resetBuffer">resetBuffer</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
<a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a></span></dt><dd><p>Reset the &#39;next location&#39; pointer of the buffer to 0.<br />
The &#39;next location&#39; pointer gives the location for the next file read/write<br />
so resetting this means you can write it again</p>
</dd><dt id="Data.Buffer.resizeBuffer"><span class="name function" title="Data.Buffer.resizeBuffer">resizeBuffer</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
<span class="type" title="Int">Int</span> ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> (<a class="type" title="Prelude.Maybe.Maybe" href="Prelude.Maybe.html#Prelude.Maybe.Maybe">Maybe</a> <a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a>)</span></dt><dd><p>Create a new buffer, copying the contents of the old buffer to the new.<br />
Returns &#39;Nothing&#39; if resizing fails</p>
</dd><dt id="Data.Buffer.setByte"><span class="name function" title="Data.Buffer.setByte">setByte</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
(<span class="boundvar" title="">loc</span> : <span class="type" title="Int">Int</span>) ->
(<span class="boundvar" title="">val</span> : <span class="type" title="Bits8">Bits8</span>) ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a></span></dt><dd><p>Set the byte at position &#39;loc&#39; to &#39;val&#39;.<br />
Does nothing if the location is outside the bounds of the buffer</p>
</dd><dt id="Data.Buffer.setDouble"><span class="name function" title="Data.Buffer.setDouble">setDouble</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
(<span class="boundvar" title="">loc</span> : <span class="type" title="Int">Int</span>) ->
(<span class="boundvar" title="">val</span> : <span class="type" title="Double">Double</span>) ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a></span></dt><dd><p>Set the double at position &#39;loc&#39; to &#39;val&#39;.<br />
Uses 8 bytes (assumes 64 bit double).<br />
Does nothing if the location is outside the bounds of the buffer</p>
</dd><dt id="Data.Buffer.setInt"><span class="name function" title="Data.Buffer.setInt">setInt</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
(<span class="boundvar" title="">loc</span> : <span class="type" title="Int">Int</span>) ->
(<span class="boundvar" title="">val</span> : <span class="type" title="Int">Int</span>) ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a></span></dt><dd><p>Set the int at position &#39;loc&#39; to &#39;val&#39;.<br />
Uses 4 bytes (assumes up to 32 bit Int).<br />
Does nothing if the location is outside the bounds of the buffer</p>
</dd><dt id="Data.Buffer.setString"><span class="name function" title="Data.Buffer.setString">setString</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
<span class="type" title="Int">Int</span> ->
<span class="type" title="String">String</span> ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a></span></dt><dd><p>Set the byte at position &#39;loc&#39; to &#39;val&#39;.<br />
Does nothing if the location is out of bounds of the buffer, or the string<br />
is too long for the location</p>
</dd><dt id="Data.Buffer.size"><span class="name function" title="Data.Buffer.size">size</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
<span class="type" title="Int">Int</span></span></dt><dd></dd><dt id="Data.Buffer.writeBufferToFile"><span class="name function" title="Data.Buffer.writeBufferToFile">writeBufferToFile</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Prelude.File.File" href="Prelude.File.html#Prelude.File.File">File</a> ->
<a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a> ->
(<span class="boundvar" title="">maxbytes</span> : <span class="type" title="Int">Int</span>) ->
<a class="function" title="IO" href="[builtins].html#IO">IO</a> <a class="type" title="Data.Buffer.Buffer" href="Data.Buffer.html#Data.Buffer.Buffer">Buffer</a></span></dt><dd><p>Write &#39;maxbytes&#39; from the buffer from a file, returning a new<br />
buffer with the &#39;location&#39; pointer moved along</p>
</dd></dl></div></div><footer>Produced by IdrisDoc version 1.0</footer></body></html>