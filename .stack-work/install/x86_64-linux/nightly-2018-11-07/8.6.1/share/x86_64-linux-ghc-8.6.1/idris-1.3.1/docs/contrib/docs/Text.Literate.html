<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>IdrisDoc: Text.Literate</title><link type="text/css" rel="stylesheet" href="../styles.css"></head><body class="namespace"><div class="wrapper"><header><strong>IdrisDoc</strong>: Text.Literate<nav><a href="../index.html">Index</a></nav></header><div class="container"><h1>Text.Literate</h1><p>A simple module to process &#39;literate&#39; documents.</p>
<p>The module uses a lexer to split the document into code blocks,<br />
delineated by user-defined markers, and code lines that are<br />
indicated be a line marker. The lexer returns a document stripped<br />
of non-code elements but preserving the original document&#39;s line<br />
count. Column numbering of code lines are not preserved.</p>
<p>The underlying tokeniser is greedy.</p>
<p>Once it identifies a line marker it reads a prettifying space then<br />
consumes until the end of line. Once identifies a starting code<br />
block marker, the lexer will consume input until the next<br />
identifiable end block is encountered. Any other content is<br />
treated as part of the original document.</p>
<p>Thus, the input literate files <em>must</em> be well-formed w.r.t<br />
to code line markers and code blocks.</p>
<p>A further restriction is that literate documents cannot contain<br />
the markers within the document&#39;s main text: This will confuse the<br />
lexer.</p>
<dl class="decls"><dt id="Text.Literate.LiterateError"><span class="word">record&nbsp;</span><span class="name type" title="Text.Literate.LiterateError">LiterateError</span><span class="type">&nbsp;</span></dt><dd><dl class="decls"><dt id="Text.Literate.MkLitErr"><span class="name constructor" title="Text.Literate.MkLitErr">MkLitErr</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">line</span> : <span class="type" title="Int">Int</span>) ->
(<span class="boundvar" title="">column</span> : <span class="type" title="Int">Int</span>) ->
(<span class="boundvar" title="">input</span> : <span class="type" title="String">String</span>) ->
<a class="type" title="Text.Literate.LiterateError" href="Text.Literate.html#Text.Literate.LiterateError">LiterateError</a></span></dt><dd></dd></dl><dl class="decls"><dt id="Text.Literate.LiterateError.line"><span class="name function" title="Text.Literate.LiterateError.line">line</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">rec</span> : <a class="type" title="Text.Literate.LiterateError" href="Text.Literate.html#Text.Literate.LiterateError">LiterateError</a>) ->
<span class="type" title="Int">Int</span></span></dt><dd></dd><dt id="Text.Literate.LiterateError.column"><span class="name function" title="Text.Literate.LiterateError.column">column</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">rec</span> : <a class="type" title="Text.Literate.LiterateError" href="Text.Literate.html#Text.Literate.LiterateError">LiterateError</a>) ->
<span class="type" title="Int">Int</span></span></dt><dd></dd><dt id="Text.Literate.LiterateError.input"><span class="name function" title="Text.Literate.LiterateError.input">input</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">rec</span> : <a class="type" title="Text.Literate.LiterateError" href="Text.Literate.html#Text.Literate.LiterateError">LiterateError</a>) ->
<span class="type" title="String">String</span></span></dt><dd></dd></dl></dd><dt id="Text.Literate.LiterateStyle"><span class="word">record&nbsp;</span><span class="name type" title="Text.Literate.LiterateStyle">LiterateStyle</span><span class="type">&nbsp;</span></dt><dd><p>Description of literate styles.</p>
<p>A &#39;literate&#39; style comprises of</p>
<ul>
<li>a list of code block deliminators (<code>deliminators</code>);</li>
<li>a list of code line markers (<code>line_markers</code>); and</li>
<li>a list of known file extensions <code>file_extensions</code>.</li>
</ul>
<p>Some example specifications:</p>
<ul>
<li>Bird Style</li>
</ul>
<pre><code>MkLitStyle Nil [&quot;&gt;&quot;, &quot;&lt;&quot;] Nil
</code></pre>
<ul>
<li>Literate Haskell (for LaTeX)</li>
</ul>
<pre><code>MkLitStyle [(&quot;\\begin{code}&quot;, &quot;\\end{code}&quot;),(&quot;\\begin{spec}&quot;,&quot;\\end{spec}&quot;)]
Nil
[&quot;lhs&quot;, &quot;tex&quot;]
</code></pre>
<ul>
<li>OrgMode</li>
</ul>
<pre><code>MkLitStyle [(&quot;#+BEGIN_SRC idris&quot;,&quot;#+END_SRC&quot;), (&quot;#+COMMENT idris&quot;,&quot;#+END_COMMENT&quot;)]
[&quot;#+IDRIS:&quot;]
[&quot;org&quot;]
</code></pre>
<dl class="decls"><dt id="Text.Literate.MkLitStyle"><span class="name constructor" title="Text.Literate.MkLitStyle">MkLitStyle</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="documented boundvar" title="The pairs of start and end tags for code blocks.">deliminators</span> : <a class="type" title="Prelude.List.List" href="Prelude.List.html#Prelude.List.List">List</a> <a class="type" title="Builtins.Pair" href="Builtins.html#Builtins.Pair">(</a><span class="type" title="String">String</span><a class="type" title="Builtins.Pair" href="Builtins.html#Builtins.Pair">,</a>
<span class="type" title="String">String</span><a class="type" title="Builtins.Pair" href="Builtins.html#Builtins.Pair">)</a>) ->
(<span class="documented boundvar" title="Line markers that indicate a line contains code.">line_markers</span> : <a class="type" title="Prelude.List.List" href="Prelude.List.html#Prelude.List.List">List</a> <span class="type" title="String">String</span>) ->
(<span class="documented boundvar" title="Recognised file extensions. Not used by the module, but will be&lt;br /&gt;
of use when connecting to code that reads in the original source&lt;br /&gt;
files.">file_extensions</span> : <a class="type" title="Prelude.List.List" href="Prelude.List.html#Prelude.List.List">List</a> <span class="type" title="String">String</span>) ->
<a class="type" title="Text.Literate.LiterateStyle" href="Text.Literate.html#Text.Literate.LiterateStyle">LiterateStyle</a></span></dt><dd><dl><dt>deliminators</dt><dd><p>The pairs of start and end tags for code blocks.</p>
</dd><dt>line_markers</dt><dd><p>Line markers that indicate a line contains code.</p>
</dd><dt>file_extensions</dt><dd><p>Recognised file extensions. Not used by the module, but will be<br />
of use when connecting to code that reads in the original source<br />
files.</p>
</dd></dl></dd></dl><dl class="decls"><dt id="Text.Literate.LiterateStyle.deliminators"><span class="name function" title="Text.Literate.LiterateStyle.deliminators">deliminators</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">rec</span> : <a class="type" title="Text.Literate.LiterateStyle" href="Text.Literate.html#Text.Literate.LiterateStyle">LiterateStyle</a>) ->
<a class="type" title="Prelude.List.List" href="Prelude.List.html#Prelude.List.List">List</a> <a class="type" title="Builtins.Pair" href="Builtins.html#Builtins.Pair">(</a><span class="type" title="String">String</span><a class="type" title="Builtins.Pair" href="Builtins.html#Builtins.Pair">,</a>
<span class="type" title="String">String</span><a class="type" title="Builtins.Pair" href="Builtins.html#Builtins.Pair">)</a></span></dt><dd><p>The pairs of start and end tags for code blocks.</p>
</dd><dt id="Text.Literate.LiterateStyle.line_markers"><span class="name function" title="Text.Literate.LiterateStyle.line_markers">line_markers</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">rec</span> : <a class="type" title="Text.Literate.LiterateStyle" href="Text.Literate.html#Text.Literate.LiterateStyle">LiterateStyle</a>) ->
<a class="type" title="Prelude.List.List" href="Prelude.List.html#Prelude.List.List">List</a> <span class="type" title="String">String</span></span></dt><dd><p>Line markers that indicate a line contains code.</p>
</dd><dt id="Text.Literate.LiterateStyle.file_extensions"><span class="name function" title="Text.Literate.LiterateStyle.file_extensions">file_extensions</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">rec</span> : <a class="type" title="Text.Literate.LiterateStyle" href="Text.Literate.html#Text.Literate.LiterateStyle">LiterateStyle</a>) ->
<a class="type" title="Prelude.List.List" href="Prelude.List.html#Prelude.List.List">List</a> <span class="type" title="String">String</span></span></dt><dd><p>Recognised file extensions. Not used by the module, but will be<br />
of use when connecting to code that reads in the original source<br />
files.</p>
</dd></dl></dd><dt id="Text.Literate.MkLitErr"><span class="name constructor" title="Text.Literate.MkLitErr">MkLitErr</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="boundvar" title="">line</span> : <span class="type" title="Int">Int</span>) ->
(<span class="boundvar" title="">column</span> : <span class="type" title="Int">Int</span>) ->
(<span class="boundvar" title="">input</span> : <span class="type" title="String">String</span>) ->
<a class="type" title="Text.Literate.LiterateError" href="Text.Literate.html#Text.Literate.LiterateError">LiterateError</a></span></dt><dd></dd><dt id="Text.Literate.MkLitStyle"><span class="name constructor" title="Text.Literate.MkLitStyle">MkLitStyle</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="documented boundvar" title="The pairs of start and end tags for code blocks.">deliminators</span> : <a class="type" title="Prelude.List.List" href="Prelude.List.html#Prelude.List.List">List</a> <a class="type" title="Builtins.Pair" href="Builtins.html#Builtins.Pair">(</a><span class="type" title="String">String</span><a class="type" title="Builtins.Pair" href="Builtins.html#Builtins.Pair">,</a>
<span class="type" title="String">String</span><a class="type" title="Builtins.Pair" href="Builtins.html#Builtins.Pair">)</a>) ->
(<span class="documented boundvar" title="Line markers that indicate a line contains code.">line_markers</span> : <a class="type" title="Prelude.List.List" href="Prelude.List.html#Prelude.List.List">List</a> <span class="type" title="String">String</span>) ->
(<span class="documented boundvar" title="Recognised file extensions. Not used by the module, but will be&lt;br /&gt;
of use when connecting to code that reads in the original source&lt;br /&gt;
files.">file_extensions</span> : <a class="type" title="Prelude.List.List" href="Prelude.List.html#Prelude.List.List">List</a> <span class="type" title="String">String</span>) ->
<a class="type" title="Text.Literate.LiterateStyle" href="Text.Literate.html#Text.Literate.LiterateStyle">LiterateStyle</a></span></dt><dd><dl><dt>deliminators</dt><dd><p>The pairs of start and end tags for code blocks.</p>
</dd><dt>line_markers</dt><dd><p>Line markers that indicate a line contains code.</p>
</dd><dt>file_extensions</dt><dd><p>Recognised file extensions. Not used by the module, but will be<br />
of use when connecting to code that reads in the original source<br />
files.</p>
</dd></dl></dd><dt id="Text.Literate.extractCode"><span class="name function" title="Text.Literate.extractCode">extractCode</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="documented boundvar" title="The literate specification to use.">specification</span> : <a class="type" title="Text.Literate.LiterateStyle" href="Text.Literate.html#Text.Literate.LiterateStyle">LiterateStyle</a>) ->
(<span class="documented boundvar" title="The literate source file.&lt;/p&gt;
&lt;p&gt;Returns a &lt;code&gt;LiterateError&lt;/code&gt; if the literate file contains malformed&lt;br /&gt;
code blocks or code lines.">litStr</span> : <span class="type" title="String">String</span>) ->
<a class="type" title="Prelude.Either.Either" href="Prelude.Either.html#Prelude.Either.Either">Either</a> <a class="type" title="Text.Literate.LiterateError" href="Text.Literate.html#Text.Literate.LiterateError">LiterateError</a>
<span class="type" title="String">String</span></span></dt><dd><p>Given a &#39;literate specification&#39; extract the code from the<br />
literate source file (<code>litStr</code>) that follows the presented style.</p>
<dl><dt>specification</dt><dd><p>The literate specification to use.</p>
</dd><dt>litStr</dt><dd><p>The literate source file.</p>
<p>Returns a <code>LiterateError</code> if the literate file contains malformed<br />
code blocks or code lines.</p>
</dd></dl></dd></dl></div></div><footer>Produced by IdrisDoc version 1.0</footer></body></html>