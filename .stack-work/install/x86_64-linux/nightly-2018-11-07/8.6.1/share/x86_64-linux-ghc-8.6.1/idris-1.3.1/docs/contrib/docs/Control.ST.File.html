<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>IdrisDoc: Control.ST.File</title><link type="text/css" rel="stylesheet" href="../styles.css"></head><body class="namespace"><div class="wrapper"><header><strong>IdrisDoc</strong>: Control.ST.File<nav><a href="../index.html">Index</a></nav></header><div class="container"><h1>Control.ST.File</h1><dl class="decls"><dt id="Control.ST.File.File"><span class="word">interface&nbsp;</span><span class="name type" title="Control.ST.File.File">File</span><span class="signature">&nbsp;</span></dt><dd><p>Description of state transition operations on a file.</p>
<p>+------------+-------------+----------------+----------------+----------------+<br />
| Operation | State in | Mode in | State out | Mode out |<br />
+------------+-------------+----------------+----------------+----------------+<br />
| open | - | - | file handle | input paramater|<br />
| close | file handle | any | - | - |<br />
| eof | file handle | ValidModeRead | file handle | ValidModeRead |<br />
| flush | file handle | any | file handle | unchanged |<br />
| readLine | file handle | ValidModeRead | file handle | ValidModeRead |<br />
| readChar | file handle | ValidModeRead | file handle | ValidModeRead |<br />
| readFile | - | - | - | - |<br />
| writeString| file handle | ValidModeWrite | file handle | ValidModeWrite |<br />
| writeLine | file handle | ValidModeWrite | file handle | ValidModeWrite |<br />
| writeFile | - | - | - | - |<br />
+------------+-------------+----------------+----------------+----------------+</p>
<dl class="decls"><dt id="Control.ST.File.FileHandleI"><span class="name function" title="Control.ST.File.FileHandleI">FileHandleI</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.File" href="Control.ST.File.html#Control.ST.File.File">File</a> <span class="implicit boundvar" title="">m</span> =>
<a class="type" title="Prelude.File.Mode" href="Prelude.File.html#Prelude.File.Mode">Mode</a> ->
<span class="type" title="Type">Type</span></span></dt><dd></dd><dt id="Control.ST.File.open"><span class="name function" title="Control.ST.File.open">open</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.File" href="Control.ST.File.html#Control.ST.File.File">File</a> <span class="implicit boundvar" title="">m</span> =>
(<span class="boundvar" title="">fname</span> : <span class="type" title="String">String</span>) ->
(<span class="boundvar" title="">mode</span> : <a class="type" title="Prelude.File.Mode" href="Prelude.File.html#Prelude.File.Mode">Mode</a>) ->
<a class="function" title="Control.ST.ST" href="Control.ST.html#Control.ST.ST">ST</a> <span class="implicit boundvar" title="">m</span>
(<a class="type" title="Prelude.Either.Either" href="Prelude.Either.html#Prelude.Either.Either">Either</a> <a class="type" title="Prelude.File.FileError" href="Prelude.File.html#Prelude.File.FileError">FileError</a>
<a class="type" title="Control.ST.Var" href="Control.ST.html#Control.ST.Var">Var</a>)
<span class="data" title="[">[</span><a class="function" title="Control.ST.addIfRight" href="Control.ST.html#Control.ST.addIfRight">addIfRight</a> (<a class="function" title="Control.ST.File.FileHandleI" href="Control.ST.File.html#Control.ST.File.FileHandleI">FileHandleI</a> <span class="boundvar" title="">mode</span>)<span class="data" title="]">]</span></span></dt><dd><p>Open a file.</p>
</dd><dt id="Control.ST.File.close"><span class="name function" title="Control.ST.File.close">close</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.File" href="Control.ST.File.html#Control.ST.File.File">File</a> <span class="implicit boundvar" title="">m</span> =>
(<span class="boundvar" title="">fileHandle</span> : <a class="type" title="Control.ST.Var" href="Control.ST.html#Control.ST.Var">Var</a>) ->
<a class="function" title="Control.ST.ST" href="Control.ST.html#Control.ST.ST">ST</a> <span class="implicit boundvar" title="">m</span>
<a class="type" title="Unit" href="[builtins].html#Unit">()</a>
<span class="data" title="[">[</span><a class="function" title="Control.ST.remove" href="Control.ST.html#Control.ST.remove">remove</a> <span class="boundvar" title="">fileHandle</span>
(<a class="function" title="Control.ST.File.FileHandleI" href="Control.ST.File.html#Control.ST.File.FileHandleI">FileHandleI</a> <span class="implicit boundvar" title="">mode</span>)<span class="data" title="]">]</span></span></dt><dd><p>Close a file.</p>
</dd><dt id="Control.ST.File.eof"><span class="name function" title="Control.ST.File.eof">eof</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.File" href="Control.ST.File.html#Control.ST.File.File">File</a> <span class="implicit boundvar" title="">m</span> =>
(<span class="boundvar" title="">fileHandle</span> : <a class="type" title="Control.ST.Var" href="Control.ST.html#Control.ST.Var">Var</a>) ->
{<span class="keyword" title="">auto</span> <a class="" title="prf" href="[builtins].html#prf">prf</a> : <a class="type" title="Control.ST.File.ValidModeRead" href="Control.ST.File.html#Control.ST.File.ValidModeRead">ValidModeRead</a> <span class="implicit boundvar" title="">mode</span>} ->
<a class="function" title="Control.ST.ST" href="Control.ST.html#Control.ST.ST">ST</a> <span class="implicit boundvar" title="">m</span>
<a class="type" title="Prelude.Bool.Bool" href="Prelude.Bool.html#Prelude.Bool.Bool">Bool</a>
<span class="data" title="[">[</span><span class="boundvar" title="">fileHandle</span> <a class="function" title="Control.ST.Stable.:::" href="Control.ST.Stable.html#Control.ST.Stable.:::">:::</a>
<a class="function" title="Control.ST.File.FileHandleI" href="Control.ST.File.html#Control.ST.File.FileHandleI">FileHandleI</a> <span class="implicit boundvar" title="">mode</span><span class="data" title="]">]</span></span></dt><dd><p>Have we reached the end of the file.</p>
</dd><dt id="Control.ST.File.flush"><span class="name function" title="Control.ST.File.flush">flush</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.File" href="Control.ST.File.html#Control.ST.File.File">File</a> <span class="implicit boundvar" title="">m</span> =>
(<span class="boundvar" title="">fileHandle</span> : <a class="type" title="Control.ST.Var" href="Control.ST.html#Control.ST.Var">Var</a>) ->
<a class="function" title="Control.ST.ST" href="Control.ST.html#Control.ST.ST">ST</a> <span class="implicit boundvar" title="">m</span>
<a class="type" title="Unit" href="[builtins].html#Unit">()</a>
<span class="data" title="[">[</span><span class="boundvar" title="">fileHandle</span> <a class="function" title="Control.ST.Stable.:::" href="Control.ST.Stable.html#Control.ST.Stable.:::">:::</a>
<a class="function" title="Control.ST.File.FileHandleI" href="Control.ST.File.html#Control.ST.File.FileHandleI">FileHandleI</a> <span class="implicit boundvar" title="">mode</span><span class="data" title="]">]</span></span></dt><dd><p>Flush</p>
</dd><dt id="Control.ST.File.readLine"><span class="name function" title="Control.ST.File.readLine">readLine</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.File" href="Control.ST.File.html#Control.ST.File.File">File</a> <span class="implicit boundvar" title="">m</span> =>
(<span class="boundvar" title="">fileHandle</span> : <a class="type" title="Control.ST.Var" href="Control.ST.html#Control.ST.Var">Var</a>) ->
{<span class="keyword" title="">auto</span> <a class="" title="prf" href="[builtins].html#prf">prf</a> : <a class="type" title="Control.ST.File.ValidModeRead" href="Control.ST.File.html#Control.ST.File.ValidModeRead">ValidModeRead</a> <span class="implicit boundvar" title="">mode</span>} ->
<a class="function" title="Control.ST.ST" href="Control.ST.html#Control.ST.ST">ST</a> <span class="implicit boundvar" title="">m</span>
(<a class="type" title="Prelude.Either.Either" href="Prelude.Either.html#Prelude.Either.Either">Either</a> <a class="type" title="Prelude.File.FileError" href="Prelude.File.html#Prelude.File.FileError">FileError</a>
<span class="type" title="String">String</span>)
<span class="data" title="[">[</span><span class="boundvar" title="">fileHandle</span> <a class="function" title="Control.ST.Stable.:::" href="Control.ST.Stable.html#Control.ST.Stable.:::">:::</a>
<a class="function" title="Control.ST.File.FileHandleI" href="Control.ST.File.html#Control.ST.File.FileHandleI">FileHandleI</a> <span class="implicit boundvar" title="">mode</span><span class="data" title="]">]</span></span></dt><dd><p>Read a complete line.</p>
</dd><dt id="Control.ST.File.readChar"><span class="name function" title="Control.ST.File.readChar">readChar</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.File" href="Control.ST.File.html#Control.ST.File.File">File</a> <span class="implicit boundvar" title="">m</span> =>
(<span class="boundvar" title="">fileHandle</span> : <a class="type" title="Control.ST.Var" href="Control.ST.html#Control.ST.Var">Var</a>) ->
{<span class="keyword" title="">auto</span> <a class="" title="prf" href="[builtins].html#prf">prf</a> : <a class="type" title="Control.ST.File.ValidModeRead" href="Control.ST.File.html#Control.ST.File.ValidModeRead">ValidModeRead</a> <span class="implicit boundvar" title="">mode</span>} ->
<a class="function" title="Control.ST.ST" href="Control.ST.html#Control.ST.ST">ST</a> <span class="implicit boundvar" title="">m</span>
(<a class="type" title="Prelude.Either.Either" href="Prelude.Either.html#Prelude.Either.Either">Either</a> <a class="type" title="Prelude.File.FileError" href="Prelude.File.html#Prelude.File.FileError">FileError</a>
<span class="type" title="Char">Char</span>)
<span class="data" title="[">[</span><span class="boundvar" title="">fileHandle</span> <a class="function" title="Control.ST.Stable.:::" href="Control.ST.Stable.html#Control.ST.Stable.:::">:::</a>
<a class="function" title="Control.ST.File.FileHandleI" href="Control.ST.File.html#Control.ST.File.FileHandleI">FileHandleI</a> <span class="implicit boundvar" title="">mode</span><span class="data" title="]">]</span></span></dt><dd><p>Read a <code>Char</code>.</p>
</dd><dt id="Control.ST.File.readFile"><span class="name function" title="Control.ST.File.readFile">readFile</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.File" href="Control.ST.File.html#Control.ST.File.File">File</a> <span class="implicit boundvar" title="">m</span> =>
(<span class="boundvar" title="">fileName</span> : <span class="type" title="String">String</span>) ->
<a class="function" title="Control.ST.ST" href="Control.ST.html#Control.ST.ST">ST</a> <span class="implicit boundvar" title="">m</span>
(<a class="type" title="Prelude.Either.Either" href="Prelude.Either.html#Prelude.Either.Either">Either</a> <a class="type" title="Prelude.File.FileError" href="Prelude.File.html#Prelude.File.FileError">FileError</a>
<span class="type" title="String">String</span>)
<span class="data" title="[]">[]</span></span></dt><dd><p>Read the contents of a file into a string.</p>
<p>This checks the size of<br />
the file before beginning to read, and only reads that many bytes,<br />
to ensure that it remains a total function if the file is appended<br />
to while being read.</p>
<p>Returns an error if fname is not a normal file.</p>
</dd><dt id="Control.ST.File.writeString"><span class="name function" title="Control.ST.File.writeString">writeString</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.File" href="Control.ST.File.html#Control.ST.File.File">File</a> <span class="implicit boundvar" title="">m</span> =>
(<span class="boundvar" title="">fileHandle</span> : <a class="type" title="Control.ST.Var" href="Control.ST.html#Control.ST.Var">Var</a>) ->
(<span class="boundvar" title="">string</span> : <span class="type" title="String">String</span>) ->
{<span class="keyword" title="">auto</span> <a class="" title="prf" href="[builtins].html#prf">prf</a> : <a class="type" title="Control.ST.File.ValidModeWrite" href="Control.ST.File.html#Control.ST.File.ValidModeWrite">ValidModeWrite</a> <span class="implicit boundvar" title="">mode</span>} ->
<a class="function" title="Control.ST.ST" href="Control.ST.html#Control.ST.ST">ST</a> <span class="implicit boundvar" title="">m</span>
(<a class="type" title="Prelude.Either.Either" href="Prelude.Either.html#Prelude.Either.Either">Either</a> <a class="type" title="Prelude.File.FileError" href="Prelude.File.html#Prelude.File.FileError">FileError</a>
<a class="type" title="Unit" href="[builtins].html#Unit">()</a>)
<span class="data" title="[">[</span><span class="boundvar" title="">fileHandle</span> <a class="function" title="Control.ST.Stable.:::" href="Control.ST.Stable.html#Control.ST.Stable.:::">:::</a>
<a class="function" title="Control.ST.File.FileHandleI" href="Control.ST.File.html#Control.ST.File.FileHandleI">FileHandleI</a> <span class="implicit boundvar" title="">mode</span><span class="data" title="]">]</span></span></dt><dd><p>Write a complete line to the file.</p>
</dd><dt id="Control.ST.File.writeLine"><span class="name function" title="Control.ST.File.writeLine">writeLine</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.File" href="Control.ST.File.html#Control.ST.File.File">File</a> <span class="implicit boundvar" title="">m</span> =>
(<span class="boundvar" title="">fileHandle</span> : <a class="type" title="Control.ST.Var" href="Control.ST.html#Control.ST.Var">Var</a>) ->
(<span class="boundvar" title="">string</span> : <span class="type" title="String">String</span>) ->
{<span class="keyword" title="">auto</span> <a class="" title="prf" href="[builtins].html#prf">prf</a> : <a class="type" title="Control.ST.File.ValidModeWrite" href="Control.ST.File.html#Control.ST.File.ValidModeWrite">ValidModeWrite</a> <span class="implicit boundvar" title="">mode</span>} ->
<a class="function" title="Control.ST.ST" href="Control.ST.html#Control.ST.ST">ST</a> <span class="implicit boundvar" title="">m</span>
(<a class="type" title="Prelude.Either.Either" href="Prelude.Either.html#Prelude.Either.Either">Either</a> <a class="type" title="Prelude.File.FileError" href="Prelude.File.html#Prelude.File.FileError">FileError</a>
<a class="type" title="Unit" href="[builtins].html#Unit">()</a>)
<span class="data" title="[">[</span><span class="boundvar" title="">fileHandle</span> <a class="function" title="Control.ST.Stable.:::" href="Control.ST.Stable.html#Control.ST.Stable.:::">:::</a>
<a class="function" title="Control.ST.File.FileHandleI" href="Control.ST.File.html#Control.ST.File.FileHandleI">FileHandleI</a> <span class="implicit boundvar" title="">mode</span><span class="data" title="]">]</span></span></dt><dd><p>Write a complete line to the file.</p>
</dd><dt id="Control.ST.File.writeFile"><span class="name function" title="Control.ST.File.writeFile">writeFile</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.File" href="Control.ST.File.html#Control.ST.File.File">File</a> <span class="implicit boundvar" title="">m</span> =>
(<span class="boundvar" title="">fname</span> : <span class="type" title="String">String</span>) ->
(<span class="boundvar" title="">string</span> : <span class="type" title="String">String</span>) ->
<a class="function" title="Control.ST.ST" href="Control.ST.html#Control.ST.ST">ST</a> <span class="implicit boundvar" title="">m</span>
(<a class="type" title="Prelude.Either.Either" href="Prelude.Either.html#Prelude.Either.Either">Either</a> <a class="type" title="Prelude.File.FileError" href="Prelude.File.html#Prelude.File.FileError">FileError</a>
<a class="type" title="Unit" href="[builtins].html#Unit">()</a>)
<span class="data" title="[]">[]</span></span></dt><dd><p>Create a file and write contents to the file.</p>
</dd></dl></dd><dt id="Control.ST.File.FileHandle"><span class="word">data&nbsp;</span><span class="name type" title="Control.ST.File.FileHandle">FileHandle</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="documented boundvar" title="The &lt;code&gt;Mode&lt;/code&gt; that the handle was generated under.">mode</span> : <a class="type" title="Prelude.File.Mode" href="Prelude.File.html#Prelude.File.Mode">Mode</a>) ->
<span class="type" title="Type">Type</span></span></dt><dd><p>The file handle which will be used as a State Transition<br />
resource in the <code>IO</code> and <code>IOExcept</code> implementations of <code>File</code>.</p>
<dl><dt>mode</dt><dd><p>The <code>Mode</code> that the handle was generated under.</p>
</dd></dl><dl class="decls"><dt id="Control.ST.File.FH"><span class="name constructor" title="Control.ST.File.FH">FH</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Prelude.File.File" href="Prelude.File.html#Prelude.File.File">File</a> ->
<a class="type" title="Control.ST.File.FileHandle" href="Control.ST.File.html#Control.ST.File.FileHandle">FileHandle</a> <span class="implicit boundvar" title="">mode</span></span></dt><dd></dd></dl></dd><dt id="Control.ST.File.ValidModeRead"><span class="word">data&nbsp;</span><span class="name type" title="Control.ST.File.ValidModeRead">ValidModeRead</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Prelude.File.Mode" href="Prelude.File.html#Prelude.File.Mode">Mode</a> ->
<span class="type" title="Type">Type</span></span></dt><dd><p>A record of the file modes that can read from a file.</p>
<dl class="decls"><dt id="Control.ST.File.VMRRead"><span class="name constructor" title="Control.ST.File.VMRRead">VMRRead</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.ValidModeRead" href="Control.ST.File.html#Control.ST.File.ValidModeRead">ValidModeRead</a> <a class="constructor" title="Prelude.File.Read" href="Prelude.File.html#Prelude.File.Read">Read</a></span></dt><dd></dd><dt id="Control.ST.File.VMRReadW"><span class="name constructor" title="Control.ST.File.VMRReadW">VMRReadW</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.ValidModeRead" href="Control.ST.File.html#Control.ST.File.ValidModeRead">ValidModeRead</a> <a class="constructor" title="Prelude.File.ReadWrite" href="Prelude.File.html#Prelude.File.ReadWrite">ReadWrite</a></span></dt><dd></dd><dt id="Control.ST.File.VMRReadWT"><span class="name constructor" title="Control.ST.File.VMRReadWT">VMRReadWT</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.ValidModeRead" href="Control.ST.File.html#Control.ST.File.ValidModeRead">ValidModeRead</a> <a class="constructor" title="Prelude.File.ReadWriteTruncate" href="Prelude.File.html#Prelude.File.ReadWriteTruncate">ReadWriteTruncate</a></span></dt><dd></dd><dt id="Control.ST.File.VMRReadA"><span class="name constructor" title="Control.ST.File.VMRReadA">VMRReadA</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.ValidModeRead" href="Control.ST.File.html#Control.ST.File.ValidModeRead">ValidModeRead</a> <a class="constructor" title="Prelude.File.ReadAppend" href="Prelude.File.html#Prelude.File.ReadAppend">ReadAppend</a></span></dt><dd></dd></dl></dd><dt id="Control.ST.File.ValidModeWrite"><span class="word">data&nbsp;</span><span class="name type" title="Control.ST.File.ValidModeWrite">ValidModeWrite</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Prelude.File.Mode" href="Prelude.File.html#Prelude.File.Mode">Mode</a> ->
<span class="type" title="Type">Type</span></span></dt><dd><p>A record of the file modes that can write from a file.</p>
<dl class="decls"><dt id="Control.ST.File.VMWWrite"><span class="name constructor" title="Control.ST.File.VMWWrite">VMWWrite</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.ValidModeWrite" href="Control.ST.File.html#Control.ST.File.ValidModeWrite">ValidModeWrite</a> <a class="constructor" title="Prelude.File.WriteTruncate" href="Prelude.File.html#Prelude.File.WriteTruncate">WriteTruncate</a></span></dt><dd></dd><dt id="Control.ST.File.VMWAppend"><span class="name constructor" title="Control.ST.File.VMWAppend">VMWAppend</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.ValidModeWrite" href="Control.ST.File.html#Control.ST.File.ValidModeWrite">ValidModeWrite</a> <a class="constructor" title="Prelude.File.Append" href="Prelude.File.html#Prelude.File.Append">Append</a></span></dt><dd></dd><dt id="Control.ST.File.VMWReadW"><span class="name constructor" title="Control.ST.File.VMWReadW">VMWReadW</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.ValidModeWrite" href="Control.ST.File.html#Control.ST.File.ValidModeWrite">ValidModeWrite</a> <a class="constructor" title="Prelude.File.ReadWrite" href="Prelude.File.html#Prelude.File.ReadWrite">ReadWrite</a></span></dt><dd></dd><dt id="Control.ST.File.VMWReadWT"><span class="name constructor" title="Control.ST.File.VMWReadWT">VMWReadWT</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Control.ST.File.ValidModeWrite" href="Control.ST.File.html#Control.ST.File.ValidModeWrite">ValidModeWrite</a> <a class="constructor" title="Prelude.File.ReadWriteTruncate" href="Prelude.File.html#Prelude.File.ReadWriteTruncate">ReadWriteTruncate</a></span></dt><dd></dd></dl></dd></dl></div></div><footer>Produced by IdrisDoc version 1.0</footer></body></html>